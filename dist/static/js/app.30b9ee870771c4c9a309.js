webpackJsonp([1],{"/626":function(t,e){},"3TcT":function(t,e){},"6nfk":function(t,e){},"90VL":function(t,e){},"9DHQ":function(t,e){},BCfr:function(t,e){},BzrI:function(t,e){},FbEL:function(t,e){},"HNa/":function(t,e){},JLzs:function(t,e){},LGiM:function(t,e){},"N+IJ":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),i=a("lHA8"),r=a.n(i),s=a("Xxa5"),c=a.n(s),l=a("exGp"),o=a.n(l),u={name:"App",data:function(){return{ClientID:["kimne78kx3ncx6brgo4mv6wki5h1ko","f03diai4g1nzfwo3om1s87jvdq65hax","apbhlybpld3ybc6grv5c118xqpoz01c"],clipJSON:[],clipNum:{},clipList:[],userList:{},gameList:{},errorclips:[],usertempset:null,gametempset:null,loadtext:"讀取網頁中...",page:1,oldpage:1,page_MAX:10,page_count:84,startcount:0,loading:!0}},watch:{page:function(t,e){this.loading=!0,this.oldpage=e,this.getList(t)}},filters:{timetz:function(t){return t?t.replace("T"," ").replace("Z"," "):""}},methods:{getRequest:function(t){var e=this;return o()(c.a.mark(function a(){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then(function(t){return t.json()}).catch(function(t){console.log("Error: ",t)});case 2:return e.next=4,e.sent;case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},a,e)}))()},getTwitchRequest:function(t){var e=this;return o()(c.a.mark(function a(){var n;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.loadtext="與Twitch伺服器連線中...",a.next=3,fetch(t,{headers:{"Client-ID":e.ClientID[Math.floor(2*Math.random())]}}).then(function(t){return t.ok?(e.loadtext="取得資料中...",t.json()):429===t.status?(e.loadtext="已達Twitch伺服器流量限制(30次/每半分鐘)，請稍後再執行",e.page=e.oldpage,null):void 0}).catch(function(t){return console.log("Error: ",t),null});case 3:return a.next=5,a.sent;case 5:return n=a.sent,a.abrupt("return",n);case 7:case"end":return a.stop()}},a,e)}))()},getList:function(t){var e=this;return o()(c.a.mark(function a(){var n,i,r,s,l,o,u,p,g;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.clipJSON.length-(t-1)*e.page_count-1,e.startcount=n,(i=n-e.page_count)<0&&(i=-1),""===e.clipList[n].id){a.next=7;break}return e.loading=!1,a.abrupt("return",null);case 7:for(r="https://api.twitch.tv/helix/clips?",s=n;s>i;s--)r+="&id="+e.clipJSON[s].ID;return a.next=12,e.getTwitchRequest(r);case 12:if((l=a.sent)&&l.data.forEach(function(t){t.Num=e.clipNum[t.id].Num;var a=parseInt(t.Num);t.thumbnail_url=a<=68||119===a||120===a?t.thumbnail_url.replace("480x272","86x45"):t.thumbnail_url.replace("480x272","260x147"),e.clipList[e.clipNum[t.id].Index]=t,e.userList[t.broadcaster_id]||(e.userList[t.broadcaster_id]={display_name:"",url:""},e.usertempset.add(t.broadcaster_id)),e.userList[t.creator_id]||(e.userList[t.creator_id]={display_name:"",url:""},e.usertempset.add(t.creator_id)),""!=t.game_id&&(e.gameList[t.game_id]||(e.gameList[t.game_id]={name:"null",url:"https://www.twitch.tv/directory/game/null"},e.gametempset.add(t.game_id)))}),o="https://api.twitch.tv/helix/users?",!(e.usertempset.size>0)){a.next=22;break}return r=o,e.usertempset.forEach(function(t){r+="&id="+t}),a.next=20,e.getTwitchRequest(r);case 20:(u=a.sent)&&(e.usertempset.clear(),u.data.forEach(function(t){e.userList[t.id]={display_name:t.display_name,url:"https://www.twitch.tv/"+t.login}}));case 22:if(p="https://api.twitch.tv/helix/games?",!(e.gametempset.size>0)){a.next=30;break}return r=p,e.gametempset.forEach(function(t){r+="&id="+t}),a.next=28,e.getTwitchRequest(r);case 28:(g=a.sent)&&(e.gametempset.clear(),g.data.forEach(function(t){e.gameList[t.id]={name:t.name,url:"https://www.twitch.tv/directory/game/"+encodeURI(t.name)}}));case 30:e.loading=!1;case 31:case"end":return a.stop()}},a,e)}))()},getJSON:function(){var t=this;return o()(c.a.mark(function e(){var a,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getRequest("http://crs-dlbot.herokuapp.com/clips");case 2:for(t.clipJSON=e.sent,t.loadtext="表單資料讀取中...",t.clipNum=t.clipJSON.reduce(function(t,e,a){return t[e.ID]={Num:e.Num,Index:a},t},{}),t.clipList=new Array(t.clipJSON.length).fill().map(function(t){return{Num:"XXX",id:"",url:"",title:"ERROR",embed_url:"",creator_id:"",created_at:null,game_id:"",thumbnail_url:""}}),a=0,n=1;a<t.clipJSON.length;a++,n++)n!=t.clipJSON[a].Num&&(t.errorclips.push(n),a--);t.page_MAX=Math.ceil(t.clipJSON.length/t.page_count),t.getList(1);case 9:case"end":return e.stop()}},e,t)}))()}},mounted:function(){this.usertempset=new r.a,this.gametempset=new r.a,this.loadtext="與Clips表單伺服器連線中...",this.getJSON()}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("v-app",[a("v-container",{staticClass:"mb-4"},[a("v-tabs",{attrs:{"icons-and-text":"",centered:"",dark:"",color:"teal"}},[a("v-tabs-slider",{attrs:{color:"teal lighten-5"}}),t._v(" "),a("v-tab",{attrs:{href:"#tab-1"}},[t._v("\n          Rules\n          "),a("v-icon",[t._v("fas fa-book")])],1),t._v(" "),a("v-tab",{attrs:{href:"#tab-2"}},[t._v("\n          Mod\n          "),a("v-icon",[t._v("fab fa-twitch")])],1),t._v(" "),a("v-tab-item",{attrs:{id:"tab-1"}},[a("v-card",{staticClass:"pa-2",attrs:{color:"teal lighten-5",flat:""}},[a("div",[t._v("[網頁說明] 本網頁將觀眾剪下的clips 透過twitch的API整合在一起 方便大家觀看")]),t._v(" "),a("div",[t._v("[指令說明] 聊天室有個指令「!片」讓各位可以投稿clip一起來壯大我們的精華區ㄛ，只要在聊天室輸入「!片 [clips網址後半部的代碼]」就可以惹是不是很簡單ㄋ。例子: 「!片 DistinctDeerMrDestructoid」")]),t._v(" "),a("div",[t._v("[標題說明] 新系統會直接抓你在剪輯時命名的標題 讓你可以在Twitch Clips自由更換標題")]),t._v(" "),a("div",[t._v("[刪除說明] 若輸入錯代碼ID 或標題格式不對 導致影片錯誤的話 請向MOD反應來將影片從表單移除")]),t._v(" "),a("div",[t._v("[表單連結] "),a("a",{staticStyle:{cursor:"pointer"},attrs:{target:"_blank",href:"http://twitch.center/customapi/quote/list?token=96a4694e"}},[t._v("http://twitch.center/customapi/quote/list?token=96a4694e")])])])],1),t._v(" "),a("v-tab-item",{attrs:{id:"tab-2"}},[a("v-card",{staticClass:"pa-2",attrs:{color:"teal lighten-5",flat:""}},[a("v-card-text",[a("div",[t._v("表單內格式有問題的Clips: "+t._s(t.errorclips))]),t._v(" "),a("div",[t._v("網頁開發: 克里斯")])])],1)],1)],1),t._v(" "),a("v-layout",{staticClass:"cliparea",attrs:{row:"",wrap:""}},[t.loading?a("v-flex",{attrs:{xs12:""}},[a("v-progress-circular",{attrs:{size:70,width:7,indeterminate:"",color:"teal"}}),t._v(" "),a("v-flex",{staticStyle:{"font-size":"2rem"},attrs:{xs12:""}},[t._v("\n          "+t._s(t.loadtext)+"\n        ")])],1):t._e(),t._v(" "),t._l(Math.min(t.startcount+1,t.page_count),function(e,n){return t.loading?t._e():a("v-flex",{key:n,attrs:{xs12:"",sm6:"",md4:"",lg3:"",xl2:""}},[a("v-card",{staticClass:"ma-1 clipcard",attrs:{color:"teal lighten-5"}},[a("a",{staticStyle:{position:"relative"},attrs:{href:t.clipList[t.clipList.length-(t.page-1)*t.page_count-e].url,target:"_blank"}},[a("v-card-media",{staticClass:"cardimage",attrs:{src:t.clipList[t.clipList.length-(t.page-1)*t.page_count-e].thumbnail_url,height:"200px"}})],1),t._v(" "),a("v-card-title",{staticClass:"wb"},[a("a",{attrs:{href:t.clipList[t.clipList.length-(t.page-1)*t.page_count-e].url,target:"_blank"}},[a("v-flex",{attrs:{xs12:""}},[t._v("\n                  "+t._s("["+t.clipList[t.clipList.length-(t.page-1)*t.page_count-e].Num+".] ")+t._s(t.clipList[t.clipList.length-(t.page-1)*t.page_count-e].title)+"\n                ")])],1),t._v(" "),""!=t.clipList[t.clipList.length-(t.page-1)*t.page_count-e].creator_id?a("v-flex",{staticStyle:{"font-size":"1.1rem"},attrs:{xs12:""}},[t._v("\n                剪輯：\n                "),a("a",{attrs:{href:t.userList[t.clipList[t.clipList.length-(t.page-1)*t.page_count-e].creator_id].url,target:"_blank"}},[t._v("\n                  "+t._s(t.userList[t.clipList[t.clipList.length-(t.page-1)*t.page_count-e].creator_id].display_name)+"\n                ")])]):t._e(),t._v(" "),a("v-flex",{staticStyle:{"font-size":"1.1rem"},attrs:{xs12:""}},[t._v("\n                "+t._s(t._f("timetz")(t.clipList[t.clipList.length-(t.page-1)*t.page_count-e].created_at))+"\n              ")]),t._v(" "),""!=t.clipList[t.clipList.length-(t.page-1)*t.page_count-e].game_id?a("v-flex",{staticStyle:{"font-size":"1.1rem"},attrs:{xs12:""}},[a("a",{attrs:{href:t.gameList[t.clipList[t.clipList.length-(t.page-1)*t.page_count-e].game_id].url,target:"_blank"}},[t._v("\n                "+t._s(t.gameList[t.clipList[t.clipList.length-(t.page-1)*t.page_count-e].game_id].name)+"\n                ")])]):t._e()],1)],1)],1)})],2)],1),t._v(" "),a("v-layout",{staticClass:"pagi pt-2 pb-2",attrs:{row:"",wrap:"","align-content-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("v-pagination",{attrs:{disabled:t.loading,length:t.page_MAX,color:"teal","prev-icon":"fas fa-angle-left","next-icon":"fas fa-angle-right"},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)],1)],1)],1)},staticRenderFns:[]};var g=a("VU/8")(u,p,!1,function(t){a("X0/u")},null,null).exports,d=a("M+UZ"),f=a.n(d),h=a("f/u0"),_=a.n(h),v=a("TWha"),m=a.n(v),x=a("JUsQ"),L=a.n(x),w=a("7M7f"),b=a.n(w),k=a("+1ch"),N=a.n(k),y=a("M9z8"),C=a.n(y),S=a("6/SM"),M=a.n(S),O=a("8Vjh"),z=a.n(O),J=a("QLUw"),V=a.n(J);a("s6ZO"),n.a.config.productionTip=!1,n.a.use(f.a,{components:{VCard:_.a,VFooter:m.a,VGrid:L.a,VIcon:b.a,VSelect:N.a,Vapp:C.a,VTabs:M.a,VPagination:z.a,VProgressCircular:V.a}});new n.a({el:"#app",components:{App:g},template:"<App/>"})},P0ba:function(t,e){},"X0/u":function(t,e){},XC5Q:function(t,e){},acBN:function(t,e){},kP4z:function(t,e){},kVeV:function(t,e){},lThp:function(t,e){},"q/9b":function(t,e){},qRVk:function(t,e){},s6ZO:function(t,e){},sBiC:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.30b9ee870771c4c9a309.js.map